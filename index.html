<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style type="text/css">
        body
        {
            font-family: Arial;
            font-size: 10pt;
        }
        .tools a
        {
            text-decoration: none;
        }
        #colors_sketch
        {
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <div class="tools">
      <img src="Esign.jpg" alt="Trulli" width="200" height="80">
    </div>
    <br />
	
	<label for="fname">SGV Employee Code </label>
	<br />
	<input type="text" placeholder="Enter Employee Code..." id="myInput" tabindex="1">
	<br />
	<br />
    <canvas placeholder="Sign Here" id="colors_sketch"  width="500" height="200" tabindex="2"></canvas>
	<br />
	<br />
	<button onclick="DownloadCanvasAsImage()" tabindex="3">Download</button>
	<button type="submit" onClick="window.location.reload()" tabindex="4">Clear</button>
	
	
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/mobomo/sketch.js/master/lib/sketch.min.js" type="text/javascript"></script>
	
    <script type="text/javascript">
			$(function () {
				$('#colors_sketch').sketch();
				$(".tools a").eq(0).attr("style", "color:#000");
				$(".tools a").click(function () {
					$(".tools a").removeAttr("style");
					$(this).attr("style", "color:#000");
				});
			});
		
			function DownloadCanvasAsImage()
			{
					let downloadLink = document.createElement('a');
					var inputVal = document.getElementById("myInput").value;
					downloadLink.setAttribute('download', inputVal + ".png" );
					alert("Emp Code: " + inputVal + " has been signed Successfully" );
					let canvas = document.getElementById('colors_sketch');
					canvas.toBlob(function(blob) 
					{
					  let url = URL.createObjectURL(blob);
					  downloadLink.setAttribute('href', url);
					  downloadLink.click();
					  window.location.reload();
					});
			}
    </script>
</body>
</html>
